/*!
 * AgeGate Popup v0.0.1
 * https://github.com/nicknish/agegate-popup
 *
 * Copyright 2017 Nicholas Nishiguchi
 * Released under the MIT license
 */
!function(e){"use strict";e.Agegate=function(e){var o={cookie:"popup_agreed",body:"Are you 21 or older?",cancelUrl:"/",expires:7,success:function(){},fail:function(){}};if(e=void 0!==e?e:{},this.setOptions(e,o),!this.checkCookie(this.options.cookie))return this.createPopup(),this.setEventHandlers(),this.freezeScrolling(),this},Agegate.prototype={createPopup:function(){this.container=document.createElement("div"),this.container.innerHTML=['<div class="popup-backdrop" style="z-index: 1000; position: fixed; top: 0; right: 0; left: 0; bottom: 0; background-color: #242629; opacity: 0.78; overflow-x: hidden; overflow-y: auto;"></div>','<div class="popup-modal" style="z-index: 1001; position: fixed; top: 0; right: 0; left: 0; bottom: 0; padding: 10px;">','<div class="popup-container" style="box-sizing: border-box; position: relative; width: 100%; max-width: 350px; padding: 40px; margin: 80px auto 0; background: white;">','<div class="popup-body" style="font-size: 26px; margin-bottom: 20px;">',this.options.body,"</div>",'<div class="popup-actions">','<button class="popup-btn popup-agree" style="padding: 6px 12px; margin-right: 10px; border: none; font-size: 20px; background-color: rgba(0,0,0,.2); cursor: pointer;">Yes</button>','<button class="popup-btn popup-cancel" style="padding: 6px 12px; border: none; font-size: 20px; background-color: rgba(0,0,0,.2); cursor: pointer;">No</button>',"</div>","</div>","</div>"].join(""),document.body.insertBefore(this.container,document.body.firstChild),this.agreeBtn=this.container.querySelector(".popup-agree"),this.cancelBtn=this.container.querySelector(".popup-cancel")},destroyPopup:function(){this.container.parentNode.removeChild(this.container),this.allowScrolling()},successHandler:function(){this.setCookie(),this.destroyPopup(),this.options.success()},failHandler:function(){this.options.fail(),e.location.href=this.options.cancelUrl},setOptions:function(e,o){this.options=Object.assign(o,e,{defaults:o})},checkCookie:function(e){return Cookies.get(e)},setCookie:function(){Cookies.set(this.options.cookie,!0,{expires:this.options.expires})},setEventHandlers:function(){this.agreeBtn.addEventListener("click",this.successHandler.bind(this),!1),this.cancelBtn.addEventListener("click",this.failHandler.bind(this),!1)},freezeScrolling:function(){document.body.style.overflowY="hidden"},allowScrolling:function(){document.body.style.overflowY="auto"}},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,o){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t},writable:!0,configurable:!0}),function(o){var t=!1;if("function"==typeof define&&define.amd&&(define(o),t=!0),"object"==typeof exports&&(module.exports=o(),t=!0),!t){var n=e.Cookies,i=e.Cookies=o();i.noConflict=function(){return e.Cookies=n,i}}}(function(){function e(){for(var e=0,o={};e<arguments.length;e++){var t=arguments[e];for(var n in t)o[n]=t[n]}return o}function o(t){function n(o,i,r){var s;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(r=e({path:"/"},n.defaults,r)).expires){var c=new Date;c.setMilliseconds(c.getMilliseconds()+864e5*r.expires),r.expires=c}r.expires=r.expires?r.expires.toUTCString():"";try{s=JSON.stringify(i),/^[\{\[]/.test(s)&&(i=s)}catch(e){}i=t.write?t.write(i,o):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),o=(o=(o=encodeURIComponent(String(o))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var p="";for(var a in r)r[a]&&(p+="; "+a,!0!==r[a]&&(p+="="+r[a]));return document.cookie=o+"="+i+p}o||(s={});for(var l=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,u=0;u<l.length;u++){var f=l[u].split("="),h=f.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var g=f[0].replace(d,decodeURIComponent);if(h=t.read?t.read(h,g):t(h,g)||h.replace(d,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(e){}if(o===g){s=h;break}o||(s[g]=h)}catch(e){}}return s}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(o,t){n(o,"",e(t,{expires:-1}))},n.withConverter=o,n}return o(function(){})})}(window);
